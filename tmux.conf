#make clipboard work normally (pbcopy)
set-option -g default-command "reattach-to-user-namespace -l bash"

#status at top
set-option -g status-position top

#start window numbering at 1
set -g base-index 1

# rebind prefix
set-option -g prefix C-a
unbind-key C-b
bind-key C-a send-prefix

# rebind split window command
unbind %
bind | split-window -h
bind - split-window -v

# Create 25% lower split
unbind t
bind t split-window -p 25

# Enable pretty colors
set -g default-terminal "screen-256color"

# Enable mouse
set -g mode-mouse on
set -g mouse-select-pane on
set -g mouse-select-window on
set-window-option -g mode-mouse on

# Try to make scrolling work
set -g terminal-overrides 'xterm*:smcup@:rmcup@'
set-option -g mouse-select-pane on
set-option -g mouse-select-window on

# Increase history
set -g history-limit 5000


# Force a reload of the config file
unbind r
bind r source-file ~/.tmux.conf

# pane border and colors
set-option -g pane-active-border-fg yellow
set-option -g pane-border-fg white

# highlight active window
set-window-option -g window-status-current-bg colour166
set-window-option -g window-status-current-fg colour15
set-window-option -g window-status-current-attr bold
set-window-option -g window-status-current-format ' #I #W '

# smart pane switching with awareness of vim splits
bind -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
bind -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
bind -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
bind -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"
bind -n C-\ run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys 'C-\\') || tmux select-pane -l"


# powerline status
set -g status-left-length 32
set -g status-right-length 150

set -g status-fg white
set -g status-bg colour234
set -g window-status-activity-attr bold
set -g pane-border-fg colour245
set -g pane-active-border-fg colour39
set -g message-fg colour16
set -g message-bg colour221
set -g message-attr bold

set -g status-left '#[fg=colour235,bg=colour252,bold] ❐ #S #[fg=colour252,bg=colour238,nobold]#[fg=colour245,bg=colour238,bold] #(whoami) #[fg=colour238,bg=colour234,nobold]'
set -g window-status-format "#[fg=white,bg=colour234] #I #W "
set -g window-status-current-format "#[fg=colour234,bg=colour39]#[fg=colour25,bg=colour39,noreverse,bold] #I : #W #[fg=colour39,bg=colour234,nobold]"
